<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistics for Psychologists - 4. Mediation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../PSYC234/Week5.html" rel="next">
<link href="../PSYC234/Week3.html" rel="prev">
<link href="../Images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/viz-1.8.2/viz.js"></script>
<link href="../site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="../site_libs/grViz-binding-1.0.11/grViz.js"></script>
<script>window.onload = function() {document.getElementById("autocomplete-0-input").placeholder = "Search Year 2";};</script>
<script language="JavaScript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="https://lu-psy-r.github.io/essentials/index_24.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="https://lu-psy-r.github.io/">
    <span class="navbar-title">Statistics for Psychologists</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year1/index.html"> 
<span class="menu-text">Year 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year2/index.html"> 
<span class="menu-text">Year 2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year3/index.html"> 
<span class="menu-text">Year 3</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/MSc/index.html"> 
<span class="menu-text">MSc</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/more/index.html"> 
<span class="menu-text">And More…</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../PSYC234/index.html">PSYC234</a></li><li class="breadcrumb-item"><a href="../PSYC234/Week4.html">4. Mediation</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../PSYC214/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSYC214</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Measurement, Variance and Inferential Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. One-Factor Between-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Assumptions of ANOVA and Follow-Up Procedures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. One-Factor Within-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Revision of One-Factor ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Introduction to Factorial Designs and Interactions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Two-Factor Between-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Two-Factor Mixed and Within-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Three-Factor ANOVA</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../PSYC234/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSYC234</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Review of correlation, simple regression and demonstration of multiple regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Multiple Regression Including Categorical Predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Multiple Regression Models that Include Interactions (Moderated Variables)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">4. Mediation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Factor Analysis and the Binomial Test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Wilcoxon rank-sum test and Wilcoxon signed-rank test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Kruskal-Wallis test and Friedman’s ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Binary logistic regression models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Expanding on binary logistic regression</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-statistical-analysis-methods-do-we-know-so-far" id="toc-what-statistical-analysis-methods-do-we-know-so-far" class="nav-link active" data-scroll-target="#what-statistical-analysis-methods-do-we-know-so-far">What Statistical Analysis Methods Do We Know So Far?</a>
  <ul class="collapse">
  <li><a href="#multiple-variables-multiple-potential-models" id="toc-multiple-variables-multiple-potential-models" class="nav-link" data-scroll-target="#multiple-variables-multiple-potential-models">Multiple Variables = Multiple Potential Models</a></li>
  </ul></li>
  <li><a href="#mediation-a-causal-model" id="toc-mediation-a-causal-model" class="nav-link" data-scroll-target="#mediation-a-causal-model">Mediation: A Causal Model</a>
  <ul class="collapse">
  <li><a href="#parts-of-the-mediation-model" id="toc-parts-of-the-mediation-model" class="nav-link" data-scroll-target="#parts-of-the-mediation-model">Parts of the Mediation Model</a></li>
  <li><a href="#full-or-partial-mediation" id="toc-full-or-partial-mediation" class="nav-link" data-scroll-target="#full-or-partial-mediation">Full or Partial Mediation</a></li>
  <li><a href="#additional-assumptions-to-the-linear-model-assumptions" id="toc-additional-assumptions-to-the-linear-model-assumptions" class="nav-link" data-scroll-target="#additional-assumptions-to-the-linear-model-assumptions">Additional Assumptions to the Linear Model Assumptions</a></li>
  <li><a href="#necessary-conditions-for-a-mediation-model" id="toc-necessary-conditions-for-a-mediation-model" class="nav-link" data-scroll-target="#necessary-conditions-for-a-mediation-model">Necessary Conditions for a Mediation Model</a></li>
  <li><a href="#further-desirable-properties-for-a-mediation-model" id="toc-further-desirable-properties-for-a-mediation-model" class="nav-link" data-scroll-target="#further-desirable-properties-for-a-mediation-model">Further Desirable Properties for a Mediation Model</a></li>
  </ul></li>
  <li><a href="#mediation-analysis-method-4-step-approach-baron-kenny-1986" id="toc-mediation-analysis-method-4-step-approach-baron-kenny-1986" class="nav-link" data-scroll-target="#mediation-analysis-method-4-step-approach-baron-kenny-1986">Mediation Analysis Method: 4 step approach (Baron &amp; Kenny, 1986)</a>
  <ul class="collapse">
  <li><a href="#step-1-model-1" id="toc-step-1-model-1" class="nav-link" data-scroll-target="#step-1-model-1">Step 1: Model 1</a></li>
  <li><a href="#step-2-model-2" id="toc-step-2-model-2" class="nav-link" data-scroll-target="#step-2-model-2">Step 2: Model 2</a></li>
  <li><a href="#step-3-model-3" id="toc-step-3-model-3" class="nav-link" data-scroll-target="#step-3-model-3">Step 3: Model 3</a></li>
  <li><a href="#step-4-within-model-3" id="toc-step-4-within-model-3" class="nav-link" data-scroll-target="#step-4-within-model-3">Step 4: Within Model 3</a></li>
  </ul></li>
  <li><a href="#mediation-analysis-method-using-r-bootstrap-test-preacher-hayes-2004-2008" id="toc-mediation-analysis-method-using-r-bootstrap-test-preacher-hayes-2004-2008" class="nav-link" data-scroll-target="#mediation-analysis-method-using-r-bootstrap-test-preacher-hayes-2004-2008">Mediation Analysis Method Using R: Bootstrap Test (Preacher &amp; Hayes, 2004, 2008)</a></li>
  <li><a href="#reporting-results-for-a-mediation-analysis-model" id="toc-reporting-results-for-a-mediation-analysis-model" class="nav-link" data-scroll-target="#reporting-results-for-a-mediation-analysis-model">Reporting Results for a Mediation Analysis Model</a></li>
  <li><a href="#interpreting-results-for-a-mediation-analysis-model" id="toc-interpreting-results-for-a-mediation-analysis-model" class="nav-link" data-scroll-target="#interpreting-results-for-a-mediation-analysis-model">Interpreting Results for a Mediation Analysis Model</a></li>
  <li><a href="#demonstration" id="toc-demonstration" class="nav-link" data-scroll-target="#demonstration">Demonstration</a>
  <ul class="collapse">
  <li><a href="#mediation-analysis" id="toc-mediation-analysis" class="nav-link" data-scroll-target="#mediation-analysis">Mediation analysis</a></li>
  <li><a href="#read-in-the-data" id="toc-read-in-the-data" class="nav-link" data-scroll-target="#read-in-the-data">Read in the data</a></li>
  <li><a href="#the-four-step-approach-of-baron-kenny-1986" id="toc-the-four-step-approach-of-baron-kenny-1986" class="nav-link" data-scroll-target="#the-four-step-approach-of-baron-kenny-1986">The Four Step Approach of Baron &amp; Kenny (1986)</a></li>
  <li><a href="#using-the-power-of-r-and-the-mediation-package" id="toc-using-the-power-of-r-and-the-mediation-package" class="nav-link" data-scroll-target="#using-the-power-of-r-and-the-mediation-package">Using the power of R and the <code>mediation</code> package</a></li>
  <li><a href="#reporting-the-mediation-analysis" id="toc-reporting-the-mediation-analysis" class="nav-link" data-scroll-target="#reporting-the-mediation-analysis">Reporting the mediation analysis</a></li>
  </ul></li>
  <li><a href="#week-14-lab-task" id="toc-week-14-lab-task" class="nav-link" data-scroll-target="#week-14-lab-task">Week 14 Lab Task</a>
  <ul class="collapse">
  <li><a href="#describe-the-variables" id="toc-describe-the-variables" class="nav-link" data-scroll-target="#describe-the-variables">Describe the variables:</a></li>
  </ul></li>
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics">Descriptive Statistics:</a></li>
  <li><a href="#mediation-analysis-4-step-approach" id="toc-mediation-analysis-4-step-approach" class="nav-link" data-scroll-target="#mediation-analysis-4-step-approach">Mediation Analysis – 4 step approach</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a></li>
  <li><a href="#bootstrap-method" id="toc-bootstrap-method" class="nav-link" data-scroll-target="#bootstrap-method">Bootstrap Method</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../PSYC234/index.html">PSYC234</a></li><li class="breadcrumb-item"><a href="../PSYC234/Week4.html">4. Mediation</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">4. Mediation</h1>
<p class="subtitle lead">Emma Mills</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!---

# Lecture

Watch the lecture on mediation theory [here](https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=41f4d33b-0a78-4566-b89f-b27100b1527d)

Watch the mediation demonstration [here](https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d2d2bc03-a2a7-404a-960d-b27100baa8e8)

## Slides

Please download the [Slides](data/Wk4/Wk14_Slides_LabTask_Q_Sheet.zip). In this zipped folder is the slides that accompany the lecture and the week 14 lab task question sheet.

## Materials

The folder is a zipped folder called `Wk14_Lecture_Lab_R_Upload_Materials.zip`. It can be downloaded [here](data/Wk4/Wk14_Lecture_Lab_R_Upload_Materials.zip) This has the model lecture script and the `.sav` file that was demonstrated in the lecture. It also has the basic layout of a .Rmd file and the data for the Week 14 lab task.

    
## Lab Task

We are working with the `Coffee_Mediation_1.csv` from the folder listed above.  Upload it to the R server, (preferably before you come to the lab) and complete the `Mediation_Lab_Script.Rmd` file using that data.  There is no model output as a guide this week. The lecture demonstration video and the model script is your guide.

## Pre-Lab Activity

1.  Watch the lecture before you attempt anything!
2.  Download the zip files and upload to your R account
3.  Play with the lecture model script to familiarise yourself with the process
4.  Come to your scheduled lab to write your own mediation analysis script

## Test Yourself

The link to this week's multiple choice quiz, WBA 4, is [here](https://modules.lancaster.ac.uk/mod/quiz/view.php?id=2506931)

--->
<section id="what-statistical-analysis-methods-do-we-know-so-far" class="level2">
<h2 class="anchored" data-anchor-id="what-statistical-analysis-methods-do-we-know-so-far">What Statistical Analysis Methods Do We Know So Far?</h2>
<p>A <em>t</em> test tests for significant difference between two - and only two - mean values. ANOVA extends the <em>t</em> test functionality by exploring differences between several means either within one factor that has two or more levels or across multiple factors that can have more than two levels. ANOVA’s (and the regression method’s) ability to manage more than two variables within an analysis, give us the capacity to explore whether predictor variables effect each other <em>and</em> the outcome variable at the same time: we can test for interactions.<br>
Measures of association follow a similar pattern: Correlation in its simplest form measures the direction and a degree of strength in a relationship between two variables.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_Correlation.png" class="img-fluid figure-img"></p>
<figcaption>Path Diagram for a Simple, Bivariate Correlation</figcaption>
</figure>
</div>
<p>Simple regression nominates one of those two variables as a predictor of the other. Indeed, if you use standardised values for predictor and outcome variables, the simple regression will return the Pearson’s <em>r</em> correlation coefficient as the simple regression coefficient estimate.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_SimpleRegression.png" class="img-fluid figure-img"></p>
<figcaption>Path Diagram for a Simple Regression Model</figcaption>
</figure>
</div>
<p>Multiple regression methods extend the correlation test functionality to many more predictor variables, each with the capcacity for multiple levels within a predictor.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_MutlipleRegression.png" class="img-fluid figure-img"></p>
<figcaption>Path Diagram for a Mutliple Regression Model (add more X for extended models)</figcaption>
</figure>
</div>
<section id="multiple-variables-multiple-potential-models" class="level3">
<h3 class="anchored" data-anchor-id="multiple-variables-multiple-potential-models">Multiple Variables = Multiple Potential Models</h3>
<p>Once we have multiple variables, we can take stock of the relationships not just between <code>X</code> and <code>Y</code> but also between the predictor variables. In week 13, we explored interactions in the context of effects on <code>Y</code> for a value for one predictor variable changing as the levels of a second predictor variable changed - an interaction. As the levels of one predictor changes, it moderates the effect of another predictor on <code>Y</code>.<br>
Predictor variable relationships are not always those of interactions / moderations, however. There are other types of relationships that occur between predictor variables. The focus of this week’s lecture is that of the mediated relationship.</p>
</section>
</section>
<section id="mediation-a-causal-model" class="level2">
<h2 class="anchored" data-anchor-id="mediation-a-causal-model">Mediation: A Causal Model</h2>
<p>Mediation helps answer the question: how does a predictor variable effect an outcome variable, in the presence of a mediating variable? Look at the path diagram below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_MediationModelPath.png" class="img-fluid figure-img"></p>
<figcaption>Path Diagram for a Mediation Model</figcaption>
</figure>
</div>
<p>There are still two predictors of <code>Y</code>, denoted by the two arrow heads that point to <code>Y</code>. If this were an interaction effect relationship then <code>M</code> would have an arrow connecting onto the line between <code>X</code> and <code>Y</code>. Instead, for a mediated relationship, the line between <code>X</code> and <code>Y</code> is both direct from <code>X</code> to <code>Y</code> on the bottom part of the diagram, but also goes through the predictor <code>M</code>, on the top of the diagram. One expression of <code>X</code>’s relationship with <code>Y</code> is direct, unmediated. An alternative expression of <code>X</code>’s relationship with <code>Y</code> is indirect, is mediated, by the predictor variable <code>M</code>. Some of <code>X</code>’s influence of effect passes through or is accounted for by <code>M</code>.</p>
<section id="parts-of-the-mediation-model" class="level3">
<h3 class="anchored" data-anchor-id="parts-of-the-mediation-model">Parts of the Mediation Model</h3>
<p>A mediation model is defined by four paths. These paths are labelled on the connecting arrows of the diagram, the lie between the variables in the rectangular boxes.</p>
<ol type="1">
<li>Path <code>c</code>: The path of <em>total effect</em> - perhaps you will recognise that this pathway is the arrow between what is otherwise a simple regression model diagram (see above and directly below).</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_TotalEffect.png" class="img-fluid figure-img"></p>
<figcaption>The Path of Total Effect in a Mediation Model</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>Path <code>c'</code>: (read Path c-Prime) The path of <em>direct effect</em></li>
<li>Path <code>a</code>: The path of <code>X</code> predicting <code>M</code></li>
<li>Path <code>b</code>: The path of <code>M</code> predicting <code>Y</code></li>
</ol>
<p>Together, path <code>a</code> and <code>b</code> are referred to as the path of <em>indirect effect</em>. See the diagram below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_MediatedPaths.png" class="img-fluid figure-img"></p>
<figcaption>The Paths of Direct and Indirect Effects in a Mediation Model</figcaption>
</figure>
</div>
<p>Pause for a moment and look at the mediated model path diagram above. If we start at <code>X</code> and trace along to <code>Y</code>, then the single-arrow line denotes a simple regression model. Go back to <code>X</code> and now trace the single arrow line to <code>M</code>. This also denotes a simple regression model. Now start at <code>M</code> and follow the single-arrow line to <code>Y</code>. We have yet another diagram for a simple regression model.</p>
<p>However, <code>X</code> predicts both <code>M</code> and <code>Y</code> in the model below, so if we want to be sure that we are isolating <code>M</code>’s effect on <code>Y</code>, we have to partial out <code>X</code>’s influence on <code>Y</code> at the same time. We do this by putting <code>X</code> as a predictor of <code>Y</code> in the same time and in the same model for when we use <code>M</code> as a predictor of <code>Y</code>. Hence, the single-arrow line from <code>M</code> to <code>Y</code>, is a multiple regression because we have two predictors - our primary predictor of <code>M</code> and (in the context of this model) our secondary predictor of <code>X</code>, whose effect on <code>Y</code> we are seeking to control.</p>
<p>Now think about this:</p>
<p>To find the effect for the indirect paths <code>a</code> and <code>b</code>, we multiply them together. If we then add them to the effect of the direct path, <code>c'</code>, then we should have the same magnitude or value of the effect as that of the total effect path, <code>c</code>.</p>
<p><span class="math display">\[
indirect\ effect + direct\ effect = total\ effect
\]</span></p>
<p>or</p>
<p><span class="math display">\[
ab + c' = c
\]</span></p>
</section>
<section id="full-or-partial-mediation" class="level3">
<h3 class="anchored" data-anchor-id="full-or-partial-mediation">Full or Partial Mediation</h3>
<p>There are many types of mediation models. Here we will concentrate on only two: fully or partially mediated models.</p>
<p>When all of the effect passes through the indirect path, or through the mediating variable <code>M</code>, then we say we have Full Mediation. We can recognise this because the direct path, or <code>c'</code> is reduced to such a small value that it is no longer significantly different from zero, i.e.&nbsp;the regression coefficient in the multiple regression model of <code>Y</code> = <code>M</code> + <code>X</code> is non-significant</p>
<p><span class="math display">\[
Full\ Mediation: ab + (c' = 0) = c
\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_FullMediation.png" class="img-fluid figure-img"></p>
<figcaption>A Full Mediation Model</figcaption>
</figure>
</div>
<p>When some of the effect passes through the indirect path, or through the mediating variable <code>M</code>, and a significant amount still passes through the direct path, then we say we have Partial Mediation.</p>
<p><span class="math display">\[
Partial\ Mediation = (ab &gt; 0) + (c' &gt; 0) = c
\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/Wk4/Wk14_PartialMediation.png" class="img-fluid figure-img"></p>
<figcaption>A Partial Mediation Model</figcaption>
</figure>
</div>
</section>
<section id="additional-assumptions-to-the-linear-model-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="additional-assumptions-to-the-linear-model-assumptions">Additional Assumptions to the Linear Model Assumptions</h3>
<p>All of the usual assumptions for linear regression models apply to mediation models - because they are, after all only a series of regression models. However, <em>we are beginning to claim a causal relationship</em> and so there are some extra considerations. As an explanatory process, <code>X</code> can be said to be ‘causally’ related to <code>Y</code> when: + <code>X</code> is associated with <code>Y</code> + <code>X</code> precedes changes in <code>Y</code> + No other unmeasured variables are related to <code>X</code> and also affect <code>Y</code></p>
<p>There are also some conditions that are specific for claiming an effect is a mediated relationship:</p>
</section>
<section id="necessary-conditions-for-a-mediation-model" class="level3">
<h3 class="anchored" data-anchor-id="necessary-conditions-for-a-mediation-model">Necessary Conditions for a Mediation Model</h3>
<ol type="1">
<li><code>X</code> need not be a significant predictor of <code>Y</code></li>
<li><code>M</code> must not be a primary predictor variable for <code>Y</code></li>
<li><code>M</code> must not be any of the study conditions</li>
<li><code>M</code> must be singificantly predicted by <code>X</code></li>
<li><code>M</code> must reduce or eradicate the impact of <code>X</code> on <code>Y</code></li>
</ol>
</section>
<section id="further-desirable-properties-for-a-mediation-model" class="level3">
<h3 class="anchored" data-anchor-id="further-desirable-properties-for-a-mediation-model">Further Desirable Properties for a Mediation Model</h3>
<ol type="1">
<li><code>X</code> should / could precede <code>M</code> in time</li>
<li><code>M</code> should significantly predict <code>Y</code> but <code>Y</code> could also significantly predict <code>M</code></li>
</ol>
<ul>
<li><code>M</code> and <code>Y</code> could be correlated if they are both causally related to <code>X</code>.</li>
<li>Swapping the order of variables can check this</li>
</ul>
<ol start="3" type="1">
<li>High power</li>
</ol>
<ul>
<li>Study design can help this: from weakest to strongest for assumptions
<ul>
<li>Cross-sectional design (v. popular in student projects – beware…)</li>
<li>Panel designs that allow for staggered measurement in waves</li>
<li>Experimental designs with random assignment and manipulated variables</li>
</ul></li>
<li>Bootstrap method offers strongest solution here. See the demonstration video <a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d2d2bc03-a2a7-404a-960d-b27100baa8e8">here</a></li>
</ul>
</section>
</section>
<section id="mediation-analysis-method-4-step-approach-baron-kenny-1986" class="level2">
<h2 class="anchored" data-anchor-id="mediation-analysis-method-4-step-approach-baron-kenny-1986">Mediation Analysis Method: 4 step approach (Baron &amp; Kenny, 1986)</h2>
<p>While this is known as a four step approach, it involves making three regression models:</p>
<ul>
<li>Step 1: Model 1 = path of total effect; a simple regression model involving predictor <code>X</code> and outcome <code>Y</code></li>
<li>Step 2: Model 2 = path of indirect effect <code>a</code>; a simple regression model involving predictor <code>X</code> and outcome <code>M</code></li>
<li>Step 3 &amp; 4: Model 3 = path of indirect effect <code>a</code> and direct effect <code>c'</code>; a multiple regression model involving predictor <code>X</code> and <code>M</code> on outcome <code>Y</code></li>
</ul>
<p>Here are the steps are linear regression equations:</p>
<section id="step-1-model-1" class="level3">
<h3 class="anchored" data-anchor-id="step-1-model-1">Step 1: Model 1</h3>
<p><span class="math display">\[
Total\ effect: = Y = b_0 + b_1 * X + e
\]</span></p>
</section>
<section id="step-2-model-2" class="level3">
<h3 class="anchored" data-anchor-id="step-2-model-2">Step 2: Model 2</h3>
<p><span class="math display">\[
indirect\ effect\ a = M = b_0 + b_1 * X + e
\]</span></p>
</section>
<section id="step-3-model-3" class="level3">
<h3 class="anchored" data-anchor-id="step-3-model-3">Step 3: Model 3</h3>
<p><span class="math display">\[
indirect\ effect\ b = Y = b_0 + b_1 * X + b_2 * M + e
\]</span></p>
</section>
<section id="step-4-within-model-3" class="level3">
<h3 class="anchored" data-anchor-id="step-4-within-model-3">Step 4: Within Model 3</h3>
<p>This occurs within model 3. For this step, look at the regression coefficient for the <code>X</code> predictor. This is the direct effect coefficient, or the coefficient for <code>c'</code> (c-prime):</p>
<ul>
<li>If the <code>X</code> coefficient in the third model is significant, and <code>M</code> is significant, then you have a partial mediation effect;</li>
<li>If the <code>X</code> coefficient in the third model is non-significant, and <code>M</code> is significant, then you have a full mediation effect</li>
</ul>
</section>
</section>
<section id="mediation-analysis-method-using-r-bootstrap-test-preacher-hayes-2004-2008" class="level2">
<h2 class="anchored" data-anchor-id="mediation-analysis-method-using-r-bootstrap-test-preacher-hayes-2004-2008">Mediation Analysis Method Using R: Bootstrap Test (Preacher &amp; Hayes, 2004, 2008)</h2>
<p>Due to concerns for low power in mediation analysis methods, the dynamic duo above constructed a bootstrapped method to harness the power of machine learning and automate a resampling technique, just so we could have greater confidence in our results. The <code>mediation</code> package (Tingley et al., 2013) has prepared the process for R users. In order to use the automated process, the researcher has to write the three models as above and then write a further line of code, telling the bootstrapping algorithm what models to use. The only process that is new in this method is the line of code for the bootstrapping part. The three models are simple and multiple regression models.</p>
<p>If at this point, you have not watched the week 14 lecture demonstration video, please watch it now <a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d2d2bc03-a2a7-404a-960d-b27100baa8e8">here</a>.</p>
</section>
<section id="reporting-results-for-a-mediation-analysis-model" class="level2">
<h2 class="anchored" data-anchor-id="reporting-results-for-a-mediation-analysis-model">Reporting Results for a Mediation Analysis Model</h2>
<p>Read this carefully because it sounds repetitive and as if I may have made an error, but it is the correct method:</p>
<p>First, as with all results, report the method that you used and your predictors, outcome variables and any transformations that you made to inform your modelling process.<br>
Then, report the <code>indirect effect</code> with its confidence intervals. This is generally the effect that has the most power. Then report the <code>direct effect</code> with its confidence intervals. At this point you may want to claim either a full or partially mediated effect, however be careful. In a context of low statistical power, Type II errors can occur for the direct path coefficient. Finally report the total effect coefficient with its confidence intervals and discuss how the additional assumptions of mediation analysis are met.</p>
</section>
<section id="interpreting-results-for-a-mediation-analysis-model" class="level2">
<h2 class="anchored" data-anchor-id="interpreting-results-for-a-mediation-analysis-model">Interpreting Results for a Mediation Analysis Model</h2>
<p>As with all results, interpretation is largely driven by theory. A partial mediation may be illuminating an otherwise concealed relationship and so inform some theory development. The size of an indirect effect may indicate the strenght of a mediating relationship which could prompt more attention and greater dedication of research resource in future studies. It is your job as the researcher to make these statements, in the context of both theory and prior research.</p>
</section>
<section id="demonstration" class="level2">
<h2 class="anchored" data-anchor-id="demonstration">Demonstration</h2>
<p>The following is the script from the lecture video</p>
<section id="mediation-analysis" class="level3">
<h3 class="anchored" data-anchor-id="mediation-analysis">Mediation analysis</h3>
<p>In this demonstration, we will model a mediation analysis.</p>
<p>Is the quality of Supervision related to Dissertation Performance? What, if any, mediating effect may the self-esteem of a student have on this relationship?</p>
<p>We are going to test for the mediator variable of <code>self esteem</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="st">"a"</span>, <span class="dv">0</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"b"</span>, <span class="st">"`c'`"</span>, <span class="dv">0</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">data=</span>data)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>plot<span class="ot">&lt;-</span> <span class="fu">plotmat</span> (M, <span class="at">pos=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">name=</span> <span class="fu">c</span>( <span class="st">"Self-esteem"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Supervision"</span>, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Dissertation </span><span class="sc">\n</span><span class="st">Performance"</span>), </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.type =</span> <span class="st">"rect"</span>, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.size =</span> <span class="fl">0.12</span>, </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.prop=</span><span class="fl">0.5</span>,  </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">curve=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Week4_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="read-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-the-data">Read in the data</h3>
<p>First, if you haven’t already, download the data file from <a href="data/Wk4/Wk14_Lecture_Lab_R_Upload_Materials.zip">here</a> and upload to the R server. You may need to change the upload codes below to suit your directory structure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>d_full <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"data/Wk4/mediation exercise 2 data.sav"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  supervision self_esteem dissertation_performance
        &lt;dbl&gt;       &lt;dbl&gt;                    &lt;dbl&gt;
1        2.67        3.14                     3   
2        2.67        3.57                     3.56
3        3.33        3                        3.41
4        3.33        2.57                     1   
5        2.67        4.71                     2.26
6        2.67        3.29                     2.41</code></pre>
</div>
</div>
<p>Early in the construction of the script, I noticed that there were different levels of missingness across the models - this means that coefficients are estimated on different datasets, so we are introducing a potential source of systematic error if we do not correct for this.</p>
<p>Checking for missingness:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  supervision     self_esteem    dissertation_performance
 Min.   :1.667   Min.   :1.571   Min.   :1.000           
 1st Qu.:3.333   1st Qu.:3.286   1st Qu.:2.380           
 Median :4.000   Median :3.857   Median :3.037           
 Mean   :3.786   Mean   :3.864   Mean   :3.028           
 3rd Qu.:4.333   3rd Qu.:4.500   3rd Qu.:3.593           
 Max.   :5.000   Max.   :5.714   Max.   :5.815           
                 NA's   :2       NA's   :3               </code></pre>
</div>
</div>
<p>For the purposes of this analysis, I will remove the observations (rows) with NA values. This is not the best way of working with missingness, but for the purposes of the demonstration it is ok.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(d_full) <span class="co"># 4 observations removed</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d) <span class="co"># no NA values listed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  supervision     self_esteem    dissertation_performance
 Min.   :1.667   Min.   :1.571   Min.   :1.000           
 1st Qu.:3.333   1st Qu.:3.286   1st Qu.:2.370           
 Median :4.000   Median :3.857   Median :3.074           
 Mean   :3.791   Mean   :3.853   Mean   :3.030           
 3rd Qu.:4.333   3rd Qu.:4.429   3rd Qu.:3.593           
 Max.   :5.000   Max.   :5.714   Max.   :5.815           </code></pre>
</div>
</div>
<p>I am going to copy and rename the variables to save on typing. You don’t have to do this of course, and it may help you if you don’t.</p>
<p><code>X</code> = supervision <code>Y</code> = dissertation_performance <code>M</code> = self_esteem</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">X =</span> supervision,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Y =</span> dissertation_performance,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">M =</span> self_esteem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-four-step-approach-of-baron-kenny-1986" class="level3">
<h3 class="anchored" data-anchor-id="the-four-step-approach-of-baron-kenny-1986">The Four Step Approach of Baron &amp; Kenny (1986)</h3>
<p>Four steps but three independent linear regression models (as listed above):</p>
<ol type="1">
<li>Simple regression for the effect of <code>X</code> on <code>Y</code> (total effect = pathway <code>c</code>)</li>
<li>Simple regression for the effect of <code>X</code> on <code>M</code> (indirect effect pathway <code>a</code>)</li>
<li>Multiple regression with <code>Y</code> as the outcome variable and</li>
</ol>
<ul>
<li>the effect of <code>M</code> (indirect effect pathway <code>b</code>)</li>
<li>while controlling for <code>X</code> (for direct effect estimation = pathway <code>c'</code>)</li>
</ul>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pay Attention
</div>
</div>
<div class="callout-body-container callout-body">
<p>When running your models, you need to assign them to objects in the environment to then be able to use them in a call to the <code>mediation</code> package when you run your bootstrapping process. Take note of how I call my models below to help you do this.</p>
</div>
</div>
<section id="step-1-test-the-c-pathway-of-the-total-effect" class="level4">
<h4 class="anchored" data-anchor-id="step-1-test-the-c-pathway-of-the-total-effect">Step 1: Test the <code>c</code> pathway of the total effect</h4>
<p><span class="math display">\[
Y = b_0 + b_1 * X + e
\]</span></p>
<p>via a simple regression model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(fit_total <span class="ot">&lt;-</span>  <span class="fu">summary</span>(<span class="fu">lm</span>(Y <span class="sc">~</span> X, d)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ X, data = d)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.83011 -0.56623 -0.04308  0.51478  2.25553 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   1.3718     0.4679   2.931 0.004470 ** 
X             0.4375     0.1209   3.620 0.000532 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.8361 on 75 degrees of freedom
Multiple R-squared:  0.1488,    Adjusted R-squared:  0.1374 
F-statistic: 13.11 on 1 and 75 DF,  p-value: 0.0005321</code></pre>
</div>
</div>
<p>The total effect of our predictor on our outcome is significant. In other words, supervision on dissertation performance is significant (<em>p</em> &lt; .001). A change in one unit of supervision is associated with an increase in dissertation performance of 0.44.</p>
<p>Check the assumptions at this point.</p>
<p>There is an effect that can be tested for mediation.</p>
</section>
<section id="step-2-test-the-a-pathway-of-the-indirect-effect" class="level4">
<h4 class="anchored" data-anchor-id="step-2-test-the-a-pathway-of-the-indirect-effect">Step 2: Test the <code>a</code> pathway of the indirect effect</h4>
<p><span class="math display">\[
M = b_0 + b_1 * X + e
\]</span></p>
<p>a second simple regression model, using <code>X</code> as a predictor but this time, <code>M</code> (self esteem here) is our outcome variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(fit_indirecta <span class="ot">&lt;-</span> <span class="fu">summary</span>(<span class="fu">lm</span>(M <span class="sc">~</span> X, d)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = M ~ X, data = d)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.34553 -0.48838  0.02337  0.61288  1.49353 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   2.7018     0.4406   6.132 3.74e-08 ***
X             0.3038     0.1138   2.670   0.0093 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.7872 on 75 degrees of freedom
Multiple R-squared:  0.08679,   Adjusted R-squared:  0.07461 
F-statistic: 7.128 on 1 and 75 DF,  p-value: 0.0093</code></pre>
</div>
</div>
<p>The indirect effect pathway <code>a</code> (<code>X</code> on <code>M</code>) is also significant (<em>p</em> = .009). A change in one unit of supervision is associated with an increase in self-esteem of 0.30.</p>
<p>So now we know that <code>X</code> and <code>M</code> share some variance - they are correlated. We have met one of the assumptions that we need to be able to perform a mediation analysis.</p>
</section>
<section id="step-3-4-test-the-b-pathway-of-the-indirect-effect-the-c-pathway-of-the-direct-effect" class="level4">
<h4 class="anchored" data-anchor-id="step-3-4-test-the-b-pathway-of-the-indirect-effect-the-c-pathway-of-the-direct-effect">Step 3 &amp; 4: Test the <code>b</code> pathway of the indirect effect &amp; the <code>c'</code> pathway of the direct effect</h4>
<p><span class="math display">\[
Y = b_0 + b_1 * X + b_2 * M + e
\]</span></p>
<p>A multiple regression model, with <code>Y</code> (dissertation performance) as our outcome variable, and <code>X</code> (supervision) and <code>M</code> (self-esteem) as predictors. Remember that this model is controlling for the effect of <code>X</code> on <code>Y</code>, because interpreting one predictor in a multiple regression model always assumes that the effect of the other predictors are already taken care of, or controlled for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(fit_indirectb <span class="ot">&lt;-</span> <span class="fu">summary</span>(<span class="fu">lm</span>(Y <span class="sc">~</span> X <span class="sc">+</span> M, d)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ X + M, data = d)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.39749 -0.48798  0.02245  0.44603  1.29565 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -0.46168    0.44402  -1.040   0.3018    
X            0.23135    0.09794   2.362   0.0208 *  
M            0.67861    0.09497   7.145 5.26e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.6475 on 74 degrees of freedom
Multiple R-squared:  0.4963,    Adjusted R-squared:  0.4827 
F-statistic: 36.46 on 2 and 74 DF,  p-value: 9.564e-12</code></pre>
</div>
</div>
<p>The indirect effect pathway <code>b</code> (<code>M</code> on <code>Y</code>), while controlling for <code>X</code> is also significant (<em>p</em> &lt; .001). A change in one unit of self-esteem is associated with an increase in dissertation-performance of 0.68 of a unit. The predictor (<code>X</code>) relationship with the outcome (<code>Y</code> and pathway <code>c'</code> - the direct effect) remains significant also (<em>p</em> &lt; .021) , but reduced relative to the step 1 model coefficient (step 1 <span class="math inline">\(b\)</span> = 0.44, step 4 <span class="math inline">\(b\)</span> = 0.23).</p>
<p>Since the direct pathway <code>c'</code> is significant, we can say that we have a partially mediated effect of self-esteem on the relationship between supervision and dissertation performance. Supervision predicts self esteem and dissertation performance, while self esteem also predicts dissertation performance.</p>
<p>If instead the <code>X</code> coefficient in the model above had been &gt; .05 i.e.&nbsp;no significant, we could have claimed a full or complete mediation of self esteem on the relationship between supervision and dissertation performance</p>
</section>
</section>
<section id="using-the-power-of-r-and-the-mediation-package" class="level3">
<h3 class="anchored" data-anchor-id="using-the-power-of-r-and-the-mediation-package">Using the power of R and the <code>mediation</code> package</h3>
<p>The <code>mediation</code> package is called by the library() function loaded at the top of the document.</p>
<ul>
<li>It takes the models for pathways <code>a</code> and <code>b</code> (<code>fit_indirecta</code> and <code>fitindirectb</code> here),</li>
<li>It needs us to tell it the name of the predictor or treatment variable and the name of the mediator variable as labelled in the models</li>
<li>and we set the <code>boot</code> argument to T for TRUE, to be able to generate confidence intervals on our co-efficients.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">mediate</span>(fit_indirecta, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                   fit_indirectb, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">treat =</span> <span class="st">'X'</span>, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mediator =</span> <span class="st">'M'</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">boot =</span> T, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">dropobs =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Running nonparametric bootstrap</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Causal Mediation Analysis 

Nonparametric Bootstrap Confidence Intervals with the Percentile Method

               Estimate 95% CI Lower 95% CI Upper p-value    
ACME             0.2062       0.0356         0.39   0.010 ** 
ADE              0.2313       0.0494         0.41   0.014 *  
Total Effect     0.4375       0.2017         0.64  &lt;2e-16 ***
Prop. Mediated   0.4712       0.1232         0.84   0.010 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Sample Size Used: 77 


Simulations: 1000 </code></pre>
</div>
</div>
<ul>
<li><strong>ACME</strong> stands for <em>average causal mediation effects</em> and is the product of pathway <code>a</code> and pathway <code>b</code> from <code>fit indirecta</code> (X = 0.30) and <code>fit_indirectb</code> (M = 0.68).</li>
<li><strong>ADE</strong> stands for average direct effects or pathway <code>c'</code>. This is the <code>X</code> coefficient in our <code>fit_indirectb</code></li>
<li><strong>Total Effect</strong> does what it says on the tin. It is the sum of the direct and indirect effect, ACME + ADE, and also calculated as <code>X</code> in model <code>fit_total</code>.</li>
<li><strong>Prop. Mediated</strong> is the proportion of the effect of <code>X</code> on <code>Y</code> that goes through <code>M</code>. We divide ACME (or <code>ab</code>) by the total effect (<code>c</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Week4_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="reporting-the-mediation-analysis" class="level3">
<h3 class="anchored" data-anchor-id="reporting-the-mediation-analysis">Reporting the mediation analysis</h3>
<p>and to use our diagram from the top of the document:</p>
<p>We are going to test for the mediator variable of <code>self esteem</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.30</span>, <span class="dv">0</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>          <span class="fl">0.68</span>, <span class="fl">0.23</span>, <span class="dv">0</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>M<span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">data=</span>data)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plot<span class="ot">&lt;-</span> <span class="fu">plotmat</span> (M, <span class="at">pos=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">name=</span> <span class="fu">c</span>( <span class="st">"Self-esteem"</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Supervision"</span>, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Dissertation </span><span class="sc">\n</span><span class="st">Performance"</span>), </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.type =</span> <span class="st">"rect"</span>, </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.size =</span> <span class="fl">0.12</span>, </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">box.prop=</span><span class="fl">0.5</span>,  </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">curve=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Week4_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>(Remember that these data are not standardised so we cannot compare between them for strength of relationships!)</p>
<p>The effect of supervision on dissertation performance was partially mediated via self-esteem. The effect of supervision on dissertation performance and the effect of self-esteem on dissertation performance were independently significant predictors. The indirect effect equals (.3)*(0.68) = .0.21. We tested the significance of this indirect effect using bootstrapping procedures. We computed the average indirect effect over 1,000 bootstrapped samples with 95% confidence intervals (bootstrapped indirect effect = 0.21 95% CI [0.06, 0.38]). Since the confidence intervals do not cross zero, we infer statistical significance.</p>
</section>
</section>
<section id="week-14-lab-task" class="level2">
<h2 class="anchored" data-anchor-id="week-14-lab-task">Week 14 Lab Task</h2>
<p>Unlike weeks 12 and 13, week 14’s lab task requires you to run a mediation analysis and answer some questions. The staff will have the answers in the lab, so you can check them either as you go along or once you have finished. The lecture demonstration and model script is there to guide you.</p>
<p>The mediation analysis for the lab task involves exploring how a property of <code>Alertness</code> mediates the effect of <code>Coffee intake</code> on <code>Problem Solving</code>.</p>
<p>You can download the data and a starter .Rmd file in a zipped folder that’s needed for this lab from <a href="data/Wk4/Wk14_Lecture_Lab_R_Upload_Materials.zip">here</a>. This is the same folder as the one at the top of the webpage. The Task and Question Sheet is in the other zipped folder, located <a href="data/Wk4/Wk14_Slides_LabTask_Q_Sheet.zip">here</a>. This is the same Slides folder that is also at the top of the webpage. You will need to store this elsewhere on your computer</p>
<section id="describe-the-variables" class="level3">
<h3 class="anchored" data-anchor-id="describe-the-variables">Describe the variables:</h3>
<p>In your working with the data, get to know the variables and think how you would describe them in your measures sub-section of your methods section of a report.</p>
<ul>
<li>Are they continuous / categorical?<br>
</li>
<li>If categorical, how many levels do they have? Which one have you coded as the reference level?</li>
<li>Tell your reader which is your outcome variable (<code>Y</code>)</li>
<li>Report the predictor variables (Xs)</li>
</ul>
</section>
</section>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics:</h2>
<ul>
<li>Calculate and report the number of observations on your categorical variables, and means and standard deviations for your continuous variables</li>
<li>Describe your sample and their demographics.</li>
</ul>
</section>
<section id="mediation-analysis-4-step-approach" class="level2">
<h2 class="anchored" data-anchor-id="mediation-analysis-4-step-approach">Mediation Analysis – 4 step approach</h2>
<p>Step 1: Total effect: Run the code and write a short paragraph of results</p>
<p>Step 2: Indirect effect path <code>a</code>: Run the code and write a short paragraph of results.</p>
<p>Step 3 &amp; 4: Indirect effect path <code>b</code> and direct effect path: Run the code and write a short paragraph of results.</p>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<ol type="1">
<li>Is there a total effect?</li>
<li>Is there an indirect path effect for <code>X</code> predicting the mediator <code>M</code>?</li>
<li>Is there an effect for indirect path of mediator <code>M</code> on outcome <code>Y</code>?</li>
<li>Is there an effect of direct path of <code>X</code> on <code>Y</code>?</li>
<li>Is there a mediated effect of coffee on problem solving?</li>
<li>If so, what type of mediation is it? 7.Why have you decided that type of mediation?</li>
</ol>
</section>
<section id="bootstrap-method" class="level2">
<h2 class="anchored" data-anchor-id="bootstrap-method">Bootstrap Method</h2>
<p>Run the bootstrap method Report the following values to 2 dp.</p>
<ol start="8" type="1">
<li>What is the average causal mediation effect value?</li>
<li>What is the average direct effect value?</li>
<li>What is the total effect value?</li>
<li>What proportion of variance goes through the indirect pathway?</li>
</ol>
<p>Draw the mediation analysis diagram with the correct values on the pathways.</p>
<p>Report the bootstrap analysis and the results.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../PSYC234/Week3.html" class="pagination-link" aria-label="3. Multiple Regression Models that Include Interactions (Moderated Variables)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">3. Multiple Regression Models that Include Interactions (Moderated Variables)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../PSYC234/Week5.html" class="pagination-link" aria-label="5. Factor Analysis and the Binomial Test">
        <span class="nav-page-text">5. Factor Analysis and the Binomial Test</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Website developed by Matthew Ivory</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../previous-content/index.html">
<p>Previous Content</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>8. Binary logistic regression models – Statistics for Psychologists</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../PSYC234/Week9.html" rel="next">
<link href="../PSYC234/Week7.html" rel="prev">
<link href="../Images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0489ba3c113ffee3d2dfeee5dfb32f4a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>window.onload = function() {document.getElementById("autocomplete-0-input").placeholder = "Search Year 2";};</script>
<script language="JavaScript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="https://lu-psy-r.github.io/essentials/index_24.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="https://lu-psy-r.github.io/">
    <span class="navbar-title">Statistics for Psychologists</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year1/index.html"> 
<span class="menu-text">Year 1</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year2/index.html"> 
<span class="menu-text">Year 2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/year3/index.html"> 
<span class="menu-text">Year 3</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/MSc/index.html"> 
<span class="menu-text">MSc</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lu-psy-r.github.io/more/index.html"> 
<span class="menu-text">And More…</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../PSYC234/index.html">PSYC234</a></li><li class="breadcrumb-item"><a href="../PSYC234/Week8.html">8. Binary logistic regression models</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../PSYC214/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSYC214</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Measurement, Variance and Inferential Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. One-Factor Between-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Assumptions of ANOVA and Follow-Up Procedures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. One-Factor Within-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Revision of One-Factor ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Introduction to Factorial Designs and Interactions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Two-Factor Between-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Two-Factor Mixed and Within-Participants ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC214/Week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Three-Factor ANOVA</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../PSYC234/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSYC234</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Review of correlation, simple regression and demonstration of multiple regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Multiple Regression Including Categorical Predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Multiple Regression Models that Include Interactions (Moderated Variables)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Mediation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Factor Analysis and the Binomial Test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Wilcoxon rank-sum test and Wilcoxon signed-rank test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Kruskal-Wallis test and Friedman’s ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week8.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">8. Binary logistic regression models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../PSYC234/Week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. Expanding on binary logistic regression</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lecture" id="toc-lecture" class="nav-link active" data-scroll-target="#lecture">Lecture</a></li>
  <li><a href="#lab-preparation" id="toc-lab-preparation" class="nav-link" data-scroll-target="#lab-preparation">Lab preparation</a></li>
  <li><a href="#lab" id="toc-lab" class="nav-link" data-scroll-target="#lab">Lab</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#datasets" id="toc-datasets" class="nav-link" data-scroll-target="#datasets">Datasets</a></li>
  <li><a href="#main-research-question" id="toc-main-research-question" class="nav-link" data-scroll-target="#main-research-question">Main research Question</a></li>
  <li><a href="#optional-extra-dataset" id="toc-optional-extra-dataset" class="nav-link" data-scroll-target="#optional-extra-dataset">Optional extra dataset</a></li>
  <li><a href="#hints-and-tips" id="toc-hints-and-tips" class="nav-link" data-scroll-target="#hints-and-tips">Hints and tips</a></li>
  <li><a href="#model-script" id="toc-model-script" class="nav-link" data-scroll-target="#model-script">Model script</a></li>
  <li><a href="#feedback-on-student-scripts" id="toc-feedback-on-student-scripts" class="nav-link" data-scroll-target="#feedback-on-student-scripts">Feedback on student scripts</a></li>
  </ul></li>
  <li><a href="#independent-learning-activities" id="toc-independent-learning-activities" class="nav-link" data-scroll-target="#independent-learning-activities">Independent learning activities</a>
  <ul class="collapse">
  <li><a href="#activity-1-the-wba" id="toc-activity-1-the-wba" class="nav-link" data-scroll-target="#activity-1-the-wba">Activity 1: The WBA</a></li>
  <li><a href="#activity-2-calculating-odds-ratios-manually" id="toc-activity-2-calculating-odds-ratios-manually" class="nav-link" data-scroll-target="#activity-2-calculating-odds-ratios-manually">Activity 2: Calculating odds ratios manually</a>
  <ul class="collapse">
  <li><a href="#activity-2-answers" id="toc-activity-2-answers" class="nav-link" data-scroll-target="#activity-2-answers">Activity 2 answers:</a></li>
  </ul></li>
  <li><a href="#activity-3" id="toc-activity-3" class="nav-link" data-scroll-target="#activity-3">Activity 3:</a>
  <ul class="collapse">
  <li><a href="#activity-3-answers" id="toc-activity-3-answers" class="nav-link" data-scroll-target="#activity-3-answers">Activity 3 answers:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#asking-questions" id="toc-asking-questions" class="nav-link" data-scroll-target="#asking-questions">Asking questions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../PSYC234/index.html">PSYC234</a></li><li class="breadcrumb-item"><a href="../PSYC234/Week8.html">8. Binary logistic regression models</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">8. Binary logistic regression models</h1>
<p class="subtitle lead">Amy Atkinson</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="lecture" class="level1">
<h1>Lecture</h1>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=17e11776-9467-4cae-98c3-b288009fb455">Part 1</a>: This part covers why it is important to understand binary logistic regression, and why it is not appropriate to run a linear regression model when the outcome is binary It also covers an introduction to binary logistic regression.</p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=36c10842-4e40-49f7-ba1c-b288009fb3ed">Part 2</a>: This part introduces the concept of odds and odds ratios, and provides an example of how to calculate odds ratios manually (to aid in understanding about what odds and odds ratios represents).</p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=94bdac5b-4bf9-44c2-84a3-b288009fb40f">Part 3</a>: This part covers the assumptions of binary logistic regression when you have one categorical predictor</p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=d813199b-569c-4d79-83bc-b288009fb3ac">Part 4</a>: This part covers how to run a binary logistic regression model with one categorical predictor in R, and how to interpret the output</p>
<p>Download all the lecture slides <a href="https://modules.lancaster.ac.uk/mod/folder/view.php?id=2507066">here</a> in both .pptx and .pdf format.</p>
</section>
<section id="lab-preparation" class="level1">
<h1>Lab preparation</h1>
<p>Before the lab, please watch the following short <a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=e64d817e-2db7-4a34-aec1-b288009fb38c">video</a>. This walks you through how to perform a binary logistic regression model in R.</p>
<p>If you want to have a play around with the script yourself, the R markdown script and dataset can be downloaded <a href="https://modules.lancaster.ac.uk/mod/folder/view.php?id=2507071">here</a>.</p>
</section>
<section id="lab" class="level1">
<h1>Lab</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Today I’ll provide you with one main research questions which will require you to complete the statistical test covered in the lecture. You can work in groups or individually.</p>
<p>You can write your script as a .R or Rmd file. Use the lab preparation video and script, lecture slides, and previous content covered in the statistics modules to help you.</p>
<p>The presentation given at the start of the lab can be downloaded <a href="https://modules.lancaster.ac.uk/mod/resource/view.php?id=2604321">here</a>.</p>
</section>
<section id="datasets" class="level2">
<h2 class="anchored" data-anchor-id="datasets">Datasets</h2>
<p>The datasets for this lab can be downloaded <a href="https://modules.lancaster.ac.uk/mod/folder/view.php?id=2507073">here</a>.</p>
</section>
<section id="main-research-question" class="level2">
<h2 class="anchored" data-anchor-id="main-research-question">Main research Question</h2>
<p>You are interested in whether the country an individual lives (UK/Australia) predicts reptile ownership (Yes/No). The dataset to use is “reptile_data.csv”</p>
<p>In the dataset, the outcome variable (reptile) is coded as “Y” and “N”:</p>
<ul>
<li>Y = Yes</li>
<li>N = No</li>
</ul>
<p>To make sure we should all end up with the same output, set UK as your reference category.</p>
</section>
<section id="optional-extra-dataset" class="level2">
<h2 class="anchored" data-anchor-id="optional-extra-dataset">Optional extra dataset</h2>
<p>I’ve also uploaded a second dataset (pen_colour.csv). If you finish the above analysis, you could have a go at performing a binary logistic regression model on tbis dataset as well. Alternatively, you could attempt this after the lab. The dataset (pen_colour.csv) can be downloaded using the link under the “Datasets” heading above.</p>
<p>Here, you are interested in whether pen colour (Black/Blue) predicts whether an individual passes their exam (Yes/No).</p>
<p>Set black as the reference category.</p>
</section>
<section id="hints-and-tips" class="level2">
<h2 class="anchored" data-anchor-id="hints-and-tips">Hints and tips</h2>
<p>Your script should aim to answer and interpret the research question above.</p>
<p>Start a new session on the server, then load in the required libraries (tidyverse, DescTools) and the dataset.</p>
<ol type="1">
<li>Prepare our data for analysis</li>
<li>Explore our data</li>
<li>Run the binary logistic regression model</li>
<li>Evaluate the model</li>
<li>Evaluate the individual predictors</li>
<li>Predicted probabilities</li>
<li>Interpret the output</li>
</ol>
</section>
<section id="model-script" class="level2">
<h2 class="anchored" data-anchor-id="model-script">Model script</h2>
<p>A model script showing one way of answering the reptile research question above using R will be available <a href="https://modules.lancaster.ac.uk/mod/resource/view.php?id=2507075">here</a> from 9am on Monday of Week 19.</p>
<p>A model script showing one way of answering the (optional) pen research question will be available <a href="https://modules.lancaster.ac.uk/mod/resource/view.php?id=2507076">here</a> from 9am on Monday of Week 19.</p>
</section>
<section id="feedback-on-student-scripts" class="level2">
<h2 class="anchored" data-anchor-id="feedback-on-student-scripts">Feedback on student scripts</h2>
<p><a href="https://modules.lancaster.ac.uk/mod/folder/view.php?id=2507079">Here</a> is feedback on the one valid student submission this week.</p>
</section>
</section>
<section id="independent-learning-activities" class="level1">
<h1>Independent learning activities</h1>
<p>Below are some independent learning activities you can have a go at to help consolidate the content. These are optional, but recommended. Activity 1 is the WBA. Activities 2 and 3 are further activities to help you consolidate the content.</p>
<section id="activity-1-the-wba" class="level2">
<h2 class="anchored" data-anchor-id="activity-1-the-wba">Activity 1: The WBA</h2>
<p>The WBA can be accessed <a href="https://modules.lancaster.ac.uk/mod/quiz/view.php?id=2506936">here</a> from 27th February 2025. Each student gets three attempts. We recommend having a go at the WBA following the lecture and lab. We recommend saving at least one attempt for revision purposes close in time to the class test.</p>
</section>
<section id="activity-2-calculating-odds-ratios-manually" class="level2">
<h2 class="anchored" data-anchor-id="activity-2-calculating-odds-ratios-manually">Activity 2: Calculating odds ratios manually</h2>
<p>This activity will involve work with the following data. You are a researcher interested in whether being excited (yes/no) predicts whether an individual passes their driving test (yes/no). Here is a table of frequencies.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data/Wk8/Week8_worksheet1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><span style="color:purple"><strong>QUESTION 1: What are the odds of passing the driving test in the “Excited – Yes” group?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 2: What are the odds of passing the driving test in the “Excited – No” group?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 3: What is the odds ratio (where “Excited – No” is the original odds)?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 4: What does this odds ratio mean?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 5: Is there evidence of quasi-complete separation or complete separation here? Give a reason for your answer.</strong></span></p>
<section id="activity-2-answers" class="level3">
<h3 class="anchored" data-anchor-id="activity-2-answers">Activity 2 answers:</h3>
<p><strong>What are the odds of passing the driving test in the “Excited – Yes” group?</strong></p>
<p><span style="color:purple">1.1666666668</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How was this calculated?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Here is how this answers were computed:</p>
<p>The probability of individuals who are excited (Excited – Yes) passing the driving test:</p>
<p>14/26 = 0.5384615385</p>
<p>14 is the number of participants who were excited and passed the driving test.</p>
<p>26 is the total number of individuals who responded “Excited – Yes” (14+12)</p>
<p>The probability of individuals who are excited (Excited – Yes) not passing the driving test:</p>
<p>12/26 = 0.4615384615</p>
<p>12 is the number of participants who were excited and did not pass the driving test.</p>
<p>26 is the total number of individuals who responded “Excited – Yes” (14+12)</p>
<p>The odds of individuals who are excited passing the driving test:</p>
<p>0.5384615385 / 0.4615384615 = 1.1666666668</p>
<p>Answer = 1.1666666668</p>
</div>
</div>
</div>
<p><strong>What are the odds of passing the driving test in the “Excited – No” group?</strong></p>
<p><span style="color:purple">0.275862069</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How was this calculated?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The probability of individuals who are not excited (Excited – No) passing the driving test:</p>
<p>8/37 = 0.216216216</p>
<p>8 is the number of participants who were not excited and passed the driving test.</p>
<p>37 is the total number of individuals who responded “Excited – No” (8+29)</p>
<p>The probability of individuals who are excited (Excited - No) not passing the driving test:</p>
<p>29/37 = 0.783783783</p>
<p>29 is the number of participants who were not excited and did not pass the driving test.</p>
<p>37 is the total number of individuals who responded “Excited – No” (8+29)</p>
<p>The odds of individuals who are not excited passing the driving test:</p>
<p>0.216216216 / 0.783783783 = 0.275862069</p>
</div>
</div>
</div>
<p><strong>What is the odds ratio (where “Excited – No” is the original odds)?</strong></p>
<p><span style="color:purple">4.23</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How was this calculated?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>1.1666666668 / 0.275862069 = 4.23</p>
<p>The odds ratio = 4.23</p>
</div>
</div>
</div>
<p><strong>What does this odds ratio mean?</strong></p>
<p><span style="color:purple">Individuals who were excited had a 4.23x higher odds of passing the driving test relative to individuals who were not excited.</span></p>
<p><strong>Is there evidence of quasi-complete separation or complete separation here? Give a reason for your answer.</strong></p>
<p><span style="color:purple">No – all cells have quite a few observations. There is no evidence of quasi-complete separation or complete separation.</span></p>
</section>
</section>
<section id="activity-3" class="level2">
<h2 class="anchored" data-anchor-id="activity-3">Activity 3:</h2>
<p>Activity 2 examines the following research question. You are a researcher interested in whether social media use (&lt; 2 hours per day / &gt; 2 hours per day) predicts whether an individual reports difficulty falling asleep (yes/no). Here is a table of frequencies:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data/Wk8/Week8_worksheet2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>You analyse this data in R and the output of your model is below. For the outcome, you set “0” as “Reports difficulty falling asleep - No” and “1” as “Reports difficulty falling asleep - Yes”.</p>
<section id="model-output" class="level4">
<h4 class="anchored" data-anchor-id="model-output">Model output</h4>
<p>Here is the model output:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = sleep_numeric ~ Social_media_use, family = binomial(), 
    data = sleep_data)

Coefficients:
                                       Estimate            Std. Error z value
(Intercept)               -0.000000000000002847  0.632455532033675660    0.00
Social_media_use&gt; 2 hours  2.427748235947893019  0.873352682387679824    2.78
                          Pr(&gt;|z|)   
(Intercept)                1.00000   
Social_media_use&gt; 2 hours  0.00544 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 42.885  on 46  degrees of freedom
Residual deviance: 34.687  on 45  degrees of freedom
AIC: 38.687

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
</section>
<section id="evaluating-the-model-output" class="level4">
<h4 class="anchored" data-anchor-id="evaluating-the-model-output">Evaluating the model output</h4>
<p>You run some code to produce the model’s chi-square statistic, the degrees of freedom and the p-value. These are displayed below. Use this to answer the following question:</p>
<p>Chi square = 8.20 Degrees of freedom = 1 P-value = 0.004</p>
<p><span style="color:purple"><strong>QUESTION 1: What do these values indicate?</strong></span></p>
</section>
<section id="evaluating-pseudo-r2" class="level4">
<h4 class="anchored" data-anchor-id="evaluating-pseudo-r2">Evaluating Pseudo R2</h4>
<p>Here are the Pseudo R2 values. Use this output to answer the following two questions:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>       McFadden     McFaddenAdj        CoxSnell      Nagelkerke   AldrichNelson 
      0.1911699       0.0978972       0.1600663       0.2674640       0.1485248 
VeallZimmermann           Efron McKelveyZavoina            Tjur             AIC 
      0.3113013       0.2081168       0.2308156       0.2081168      38.6866797 
            BIC          logLik         logLik0              G2 
     42.3869749     -17.3433399     -21.4425007       8.1983218 </code></pre>
</div>
</div>
<p><span style="color:purple"><strong>QUESTION 2: Which Pseudo R2 values might you report (based on the lecture)?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 3: What are the value of these Pseudo R2s?</strong></span></p>
</section>
<section id="evaluating-the-individual-predictors" class="level4">
<h4 class="anchored" data-anchor-id="evaluating-the-individual-predictors">Evaluating the individual predictors</h4>
<p>Look back at the summary output. Use this output to answer the following four questions:</p>
<p><span style="color:purple"><strong>QUESTION 4: What is the reference category for the predictor “Social media use”?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 5: What does the Intercept Estimate represent?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 6: What does the Social_media_use&gt; 2 hours Estimate represent?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 7: From the p-value in the summary table for the Social_media_use &gt;2 hours row, what can you conclude?</strong></span></p>
<section id="exponentiating-the-estimates" class="level5">
<h5 class="anchored" data-anchor-id="exponentiating-the-estimates">Exponentiating the estimates:</h5>
<p>Here are the exponentiated values. Use this output to answer the following three questions:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>              (Intercept) Social_media_use&gt; 2 hours 
                  1.00000                  11.33333 </code></pre>
</div>
</div>
<p><span style="color:purple"><strong>QUESTION 8: What does the Intercept represent?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 9: What does the Social_media_use&gt; 2 hours value represent?</strong></span></p>
<p><span style="color:purple"><strong>QUESTION 10: Can you interprert the Social_media_use&gt; 2 hours value?</strong></span></p>
</section>
<section id="confidence-intervals" class="level5">
<h5 class="anchored" data-anchor-id="confidence-intervals">Confidence intervals:</h5>
<p>Here are the confidence intervals. Use this output to answer the following question:</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                              2.5 %    97.5 %
(Intercept)               0.2781147  3.595639
Social_media_use&gt; 2 hours 2.1576520 71.893706</code></pre>
</div>
</div>
<p><span style="color:purple"><strong>QUESTION 11: What does the Social_media_use &gt;2 hours 95% confidence intervals represent?</strong></span></p>
</section>
</section>
<section id="activity-3-answers" class="level3">
<h3 class="anchored" data-anchor-id="activity-3-answers">Activity 3 answers:</h3>
<p><span style="color:purple"><strong>QUESTION 1: What do these values indicate?</strong></span></p>
<p><span style="color:purple"><span class="math inline">\(x^{2}\)</span>(1) = 8.20, <em>p</em> = .004.</span></p>
<p><span style="color:purple">This indicates that adding the “Social media” variable to our model significantly improved the fit, compared to the null model containing intercept only</span></p>
<p><span style="color:purple"><strong>QUESTION 2: Which Pseudo R2 values might you report (based on the lecture)?</strong></span></p>
<p><span style="color:purple">McFadden, CoxSnell and Nagelkerke</span></p>
<p><span style="color:purple"><strong>QUESTION 3: What are the value of these Pseudo R2s?</strong></span></p>
<p><span style="color:purple"> McFadden = 0.19, CoxSnell = 0.16, Nagelkerke = 0.27</span></p>
<p><span style="color:purple"><strong>QUESTION 4: What is the reference category for the predictor “Social media”?</strong></span></p>
<p><span style="color:purple">&lt; 2 hours is our reference category for the social media variable</span></p>
<p><span style="color:purple">*<strong>QUESTION 5: What does the Intercept Estimate represent?</strong></span></p>
<p><span style="color:purple">The log odds of someone with a social media value of &lt; 2 hours reporting difficulties falling asleep</span>.</p>
<p><span style="color:purple"><strong>QUESTION 6: What does the Social_media_use&gt; 2 hours Estimate represent?</strong></span></p>
<p><span style="color:purple">The change in the log odds of having a difficulty falling asleep value of “Yes” when going from the reference category (social_media&lt; 2 hours) to social_media&gt; 2 hours</span></p>
<p><span style="color:purple"><strong>QUESTION 7: From the p-value in the summary table for the Social_media_use &gt;2 hours row, what can you conclude?</strong></span></p>
<p><span style="color:purple">Daily social media use (&lt; 2 hours vs &gt; 2 hours) significantly predicts whether an individual has difficulties falling asleep (yes/no; <em>p</em> = .005)</span></p>
<p><span style="color:purple"><strong>QUESTION 8: What does the Intercept represent?</strong></span></p>
<p><span style="color:purple">The odds of reporting difficulties falling asleep for individuals who have social media use of &lt; 2 hours a day.</span></p>
<p><span style="color:purple"><strong>QUESTION 9: What does the Social_media_use&gt; 2 hours value represent?</strong></span></p>
<p><span style="color:purple">The change in odds (i.e.&nbsp;the odds ratio) of reporting difficulties falling asleep (i.e.&nbsp;difficulties falling asleep = yes) when going from Social_media_use&lt; 2 hours to Social_media_use&gt; 2 hours</span></p>
<p><span style="color:purple"><strong>QUESTION 10: Can you interprert the Social_media_use&gt; 2 hours value?</strong></span></p>
<p><span style="color:purple">The odds of reporting difficulties falling asleep are 11.33x higher if your social media use is &gt;2 hours a day than if your social media use is &lt;2 hours a day</span>.</p>
<p><span style="color:purple"><strong>QUESTION 11: What does the Social_media_use &gt;2 hours 95% confidence intervals represent?</strong></span></p>
<p><span style="color:purple">The 95% confidence around the odds ratio (for the comparison between Social_media_use &lt; 2 hours to Social_media_use &gt; 2 hours).</span></p>
</section>
</section>
</section>
<section id="asking-questions" class="level1">
<h1>Asking questions</h1>
<p>If you have any questions about this week’s content, please post them on the discussion board <a href="https://modules.lancaster.ac.uk/mod/forum/view.php?id=2506905">here</a>. If you prefer to remain anonymous, you can post questions anonymously <a href="https://lancasteruni.eu.qualtrics.com/jfe/form/SV_b1v7RbIFYA6phvo">here</a>. I will then copy your question to the discussion forum and answer it there and/or cover it in the next Q&amp;A session.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../PSYC234/Week7.html" class="pagination-link" aria-label="7. Kruskal-Wallis test and Friedman's ANOVA">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">7. Kruskal-Wallis test and Friedman’s ANOVA</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../PSYC234/Week9.html" class="pagination-link" aria-label="9. Expanding on binary logistic regression">
        <span class="nav-page-text">9. Expanding on binary logistic regression</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Website developed by Matthew Ivory</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../previous-content/index.html">
<p>Previous Content</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>